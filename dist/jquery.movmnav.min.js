/**
 * Movelize Mobile - Offcanvas Navigation with CSS3 Transitions
 * http://movelize.com/mobile-navigation
 * Copyright (c) 2017 Johann Kratzik
 * Version 1.0.0
 * License: GPL-3.0 (https://www.gnu.org/licenses/gpl-3.0.html)
*/
!function(n,a){"use strict";function t(a,t){this.options=t,this.$currentLink=a,this.$rootBody=n("body"),this.init()}t.prototype={init:function(){this.initNavLinkEvents()},initNavLinkEvents:function(){var n=this;this.$currentLink.on("click",function(a){a.preventDefault(),n.initPageLayout(),n.generateNavBlock(),setTimeout(function(){n.$rootBody.addClass("movmnav--opened")},10)})},initPageLayout:function(){this.$outerWrap=n('<div class="movmnav__outer"></div>'),this.$innerWrap=n('<div class="movmnav__inner"></div>'),this.$innerWrap.append(this.$rootBody.contents()),this.$outerWrap.append(this.$innerWrap),this.$rootBody.append(this.$outerWrap),this.initOverlay()},initOverlay:function(){var a=this;this.pageOverlay=n('<div class="movmnav__overlay">'),this.pageOverlay.on("click",function(n){a.destroy()}),this.$innerWrap.append(this.pageOverlay)},generateNavBlock:function(){var a=this;this.$mainNavContent=n('<nav class="movmnav__mainnav"></nav>'),this.$mainNav=n("<ul>"),a.$rootBody.addClass("movmnav movmnav--open-"+a.options.navOpen),this.$navHeader=n('<header class="movmnav__header"></header>'),this.$navCloser=n('<span class="movmnav__close"></span>'),this.$navCloser.on("click",function(n){a.destroy()}),this.navBlocksClone=this.convertIntoArray(this.options.navAdd),this.navBlocksClone.forEach(function(t){var e=n(t).clone();a.setNavLinksFromClone(e.contents())}),this.customizeNavBlock(),this.$mainNavContent.prepend(this.$navHeader).append(this.$mainNav),this.$outerWrap.prepend(this.$mainNavContent),this.$navHeader.append(this.$navCloser)},convertIntoArray:function(a){return"string"==typeof a?n.map(a.split(","),n.trim):a},setNavLinksFromClone:function(n){this.$mainNav.append(n)},customizeNavBlock:function(){this.$mainNav.find('li:has("ul")').each(function(){var a=n(this),t=a.find("> a"),e=a.find("ul").eq(0),o=t.text(),i=n("<div>");i.addClass("movmnav__subnav");var v=n('<span class="movmnav__back"></span>');v.text(o),v.on("click",function(n){n.preventDefault(),i.removeClass("movmnav__subnav--active")});var s=n('<span class="movmnav__next"></span>');s.on("click",function(n){n.preventDefault(),i.hasClass("movmnav__subnav--active")||i.addClass("movmnav__subnav--active")}),t.append(s),i.append(v).append(e),a.append(i)})},destroy:function(){var n=this,a=n.$rootBody.find(".movmnav__mainnav");n.$rootBody.removeClass("movmnav--opened"),a.one("transitionend",function(){n.$navCloser.off(),n.$currentLink.removeData("MovMnav"),n.pageOverlay.off(),n.pageOverlay.remove(),n.$mainNavContent.remove(),n.$rootBody.removeClass("movmnav movmnav--open-"+n.options.navOpen).append(n.$innerWrap.contents()),n.$outerWrap.remove()})}},n.fn.movmnav=function(a){return a=n.extend({},{navAdd:".movmnav__menu",navOpen:"left"},a),this.each(function(){var e=n(this);e.data("MovMnav",new t(e,a))})}}(jQuery,jQuery(window));